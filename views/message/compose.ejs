<div class="message-container">
  <h1><%- title %></h1>

  <%- messages() %>
  <% if (errors && errors.array().length > 0) { %>
    <ul class="notice">
      <% errors.array().forEach(error => { %>
        <li><%= error.msg %></li>
      <% }) %>
    </ul>
  <% } %>

  <form action="/message/send" method="post" id="messageForm">
    <div class="form-group">
      <label for="message_to">To:</label>
      <%- recipientList %>
    </div>

    <div class="form-group">
      <label for="message_subject">Subject:</label>
      <input type="text" id="message_subject" name="message_subject" required value="<%= locals.message_subject || '' %>">
    </div>

    <div class="form-group">
      <label for="message_body">Message:</label>
      <textarea id="message_body" name="message_body" required><%= locals.message_body || '' %></textarea>
    </div>

    <div class="message-actions">
      <button type="submit" class="message-btn">Send Message</button>
      <a href="/message" class="message-btn">Cancel</a>
    </div>
  </form>
</div>